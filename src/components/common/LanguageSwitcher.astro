---
import { Icon } from 'astro-icon/components';
import { getLocale } from '~/i18n/translations';
import { getPermalink } from '~/utils/permalinks';

export interface Props {
  class?: string;
}

const locale = getLocale(Astro);
const isJa = locale === 'ja';

const switchLabel = isJa ? 'English' : '日本語';
const switchHref = isJa ? getPermalink('/') : getPermalink('/ja');
---

<a
  href={switchHref}
  class:list={[
    'text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center gap-1',
    Astro.props.class,
  ]}
  aria-label={`Switch to ${switchLabel}`}
>
  <Icon name="tabler:language" class="w-5 h-5" />
  <span class="text-xs font-medium">{switchLabel}</span>
</a>
